<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VR Walk into Elevator</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>
<body>
<a-scene>

  <!-- Elevator Cabin -->
  <a-box id="elevator" position="0 1.5 -5" depth="3" height="3" width="2.5" color="#555"
         material="side: double; opacity: 0.95;"></a-box>

  <!-- Doors -->
  <a-box id="leftDoor" position="-0.75 1.5 -3.5" depth="0.05" height="3" width="1.5" color="#666"></a-box>
  <a-box id="rightDoor" position="0.75 1.5 -3.5" depth="0.05" height="3" width="1.5" color="#666"></a-box>

  <!-- Floor -->
  <a-plane rotation="-90 0 0" width="20" height="20" color="#222"></a-plane>

  <!-- Player / Camera -->
  <a-entity id="player" camera look-controls wasd-controls position="0 1.6 0">
    <a-box position="0 0 -0.2" depth="0.2" height="0.2" width="0.2" color="#f00" visible="false"></a-box>
  </a-entity>

  <!-- Trigger zone in front of elevator -->
  <a-box id="trigger" position="0 0.1 -3.5" depth="1" height="2" width="3" opacity="0" color="blue"></a-box>

  <!-- Lights -->
  <a-entity light="type: ambient; color: #aaa"></a-entity>
  <a-entity light="type: point; intensity: 1; distance: 10" position="0 5 0"></a-entity>
</a-scene>

<script>
  const player = document.querySelector('#player');
  const trigger = document.querySelector('#trigger');
  const leftDoor = document.querySelector('#leftDoor');
  const rightDoor = document.querySelector('#rightDoor');

  function openDoors() {
    leftDoor.setAttribute('animation', 'property: position; to: -2.5 1.5 -3.5; dur: 2000; easing: easeInOutQuad');
    rightDoor.setAttribute('animation', 'property: position; to: 2.5 1.5 -3.5; dur: 2000; easing: easeInOutQuad');
  }

  function closeDoors() {
    leftDoor.setAttribute('animation', 'property: position; to: -0.75 1.5 -3.5; dur: 2000; easing: easeInOutQuad');
    rightDoor.setAttribute('animation', 'property: position; to: 0.75 1.5 -3.5; dur: 2000; easing: easeInOutQuad');
  }

  // Simple collision detection for trigger zone
  setInterval(() => {
    const playerPos = player.object3D.position;
    const triggerPos = trigger.object3D.position;
    const triggerSize = 1.5; // half width/length

    const inX = playerPos.x > (triggerPos.x - triggerSize) && playerPos.x < (triggerPos.x + triggerSize);
    const inZ = playerPos.z > (triggerPos.z - triggerSize) && playerPos.z < (triggerPos.z + triggerSize);

    if (inX && inZ) {
      openDoors();
    } else {
      closeDoors();
    }
  }, 100);

</script>
</body>
</html>
